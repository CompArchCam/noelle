Simplifcations:
- parallelize only one loop per function

- assume while loops
